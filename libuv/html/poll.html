<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>uv_poll_t — Poll handle &mdash; libuv API documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.4.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="top" title="libuv API documentation" href="index.html" />
    <link rel="next" title="uv_signal_t — Signal handle" href="signal.html" />
    <link rel="prev" title="uv_async_t — Async handle" href="async.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="signal.html" title="uv_signal_t — Signal handle"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="async.html" title="uv_async_t — Async handle"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">libuv 1.4.2 API documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="uv-poll-t-poll-handle">
<span id="poll"></span><h1><a class="reference internal" href="#c.uv_poll_t" title="uv_poll_t"><code class="xref c c-type docutils literal"><span class="pre">uv_poll_t</span></code></a> &#8212; Poll handle<a class="headerlink" href="#uv-poll-t-poll-handle" title="Permalink to this headline">¶</a></h1>
<p>Poll handles are used to watch file descriptors for readability and
writability, similar to the purpose of poll(2).</p>
<p>The purpose of poll handles is to enable integrating external libraries that
rely on the event loop to signal it about the socket status changes, like
c-ares or libssh2. Using uv_poll_t for any other purpose is not recommended;
<a class="reference internal" href="tcp.html#c.uv_tcp_t" title="uv_tcp_t"><code class="xref c c-type docutils literal"><span class="pre">uv_tcp_t</span></code></a>, <a class="reference internal" href="udp.html#c.uv_udp_t" title="uv_udp_t"><code class="xref c c-type docutils literal"><span class="pre">uv_udp_t</span></code></a>, etc. provide an implementation that is faster and
more scalable than what can be achieved with <a class="reference internal" href="#c.uv_poll_t" title="uv_poll_t"><code class="xref c c-type docutils literal"><span class="pre">uv_poll_t</span></code></a>, especially on
Windows.</p>
<p>It is possible that poll handles occasionally signal that a file descriptor is
readable or writable even when it isn&#8217;t. The user should therefore always
be prepared to handle EAGAIN or equivalent when it attempts to read from or
write to the fd.</p>
<p>It is not okay to have multiple active poll handles for the same socket, this
can cause libuv to busyloop or otherwise malfunction.</p>
<p>The user should not close a file descriptor while it is being polled by an
active poll handle. This can cause the handle to report an error,
but it might also start polling another socket. However the fd can be safely
closed immediately after a call to <a class="reference internal" href="#c.uv_poll_stop" title="uv_poll_stop"><code class="xref c c-func docutils literal"><span class="pre">uv_poll_stop()</span></code></a> or <a class="reference internal" href="handle.html#c.uv_close" title="uv_close"><code class="xref c c-func docutils literal"><span class="pre">uv_close()</span></code></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">On windows only sockets can be polled with poll handles. On Unix any file
descriptor that would be accepted by poll(2) can be used.</p>
</div>
<div class="section" id="data-types">
<h2>Data types<a class="headerlink" href="#data-types" title="Permalink to this headline">¶</a></h2>
<dl class="type">
<dt id="c.uv_poll_t">
<code class="descname">uv_poll_t</code><a class="headerlink" href="#c.uv_poll_t" title="Permalink to this definition">¶</a></dt>
<dd><p>Poll handle type.</p>
</dd></dl>

<dl class="type">
<dt id="c.uv_poll_cb">
void <code class="descname">(*uv_poll_cb)</code><span class="sig-paren">(</span><a class="reference internal" href="#c.uv_poll_t" title="uv_poll_t">uv_poll_t</a>*<em>&nbsp;handle</em>, int<em>&nbsp;status</em>, int<em>&nbsp;events</em><span class="sig-paren">)</span><a class="headerlink" href="#c.uv_poll_cb" title="Permalink to this definition">¶</a></dt>
<dd><p>Type definition for callback passed to <a class="reference internal" href="#c.uv_poll_start" title="uv_poll_start"><code class="xref c c-func docutils literal"><span class="pre">uv_poll_start()</span></code></a>.</p>
</dd></dl>

<dl class="type">
<dt id="c.uv_poll_event">
<code class="descname">uv_poll_event</code><a class="headerlink" href="#c.uv_poll_event" title="Permalink to this definition">¶</a></dt>
<dd><p>Poll event types</p>
<div class="highlight-python"><div class="highlight"><pre>enum uv_poll_event {
    UV_READABLE = 1,
    UV_WRITABLE = 2
};
</pre></div>
</div>
</dd></dl>

<div class="section" id="public-members">
<h3>Public members<a class="headerlink" href="#public-members" title="Permalink to this headline">¶</a></h3>
<p>N/A</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">The <a class="reference internal" href="handle.html#c.uv_handle_t" title="uv_handle_t"><code class="xref c c-type docutils literal"><span class="pre">uv_handle_t</span></code></a> members also apply.</p>
</div>
</div>
</div>
<div class="section" id="api">
<h2>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="c.uv_poll_init">
int <code class="descname">uv_poll_init</code><span class="sig-paren">(</span><a class="reference internal" href="loop.html#c.uv_loop_t" title="uv_loop_t">uv_loop_t</a>*<em>&nbsp;loop</em>, <a class="reference internal" href="#c.uv_poll_t" title="uv_poll_t">uv_poll_t</a>*<em>&nbsp;handle</em>, int<em>&nbsp;fd</em><span class="sig-paren">)</span><a class="headerlink" href="#c.uv_poll_init" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the handle using a file descriptor.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 1.2.2: </span>the file descriptor is set to non-blocking mode.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="c.uv_poll_init_socket">
int <code class="descname">uv_poll_init_socket</code><span class="sig-paren">(</span><a class="reference internal" href="loop.html#c.uv_loop_t" title="uv_loop_t">uv_loop_t</a>*<em>&nbsp;loop</em>, <a class="reference internal" href="#c.uv_poll_t" title="uv_poll_t">uv_poll_t</a>*<em>&nbsp;handle</em>, <a class="reference internal" href="misc.html#c.uv_os_sock_t" title="uv_os_sock_t">uv_os_sock_t</a><em>&nbsp;socket</em><span class="sig-paren">)</span><a class="headerlink" href="#c.uv_poll_init_socket" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the handle using a socket descriptor. On Unix this is identical
to <a class="reference internal" href="#c.uv_poll_init" title="uv_poll_init"><code class="xref c c-func docutils literal"><span class="pre">uv_poll_init()</span></code></a>. On windows it takes a SOCKET handle.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 1.2.2: </span>the socket is set to non-blocking mode.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="c.uv_poll_start">
int <code class="descname">uv_poll_start</code><span class="sig-paren">(</span><a class="reference internal" href="#c.uv_poll_t" title="uv_poll_t">uv_poll_t</a>*<em>&nbsp;handle</em>, int<em>&nbsp;events</em>, <a class="reference internal" href="#c.uv_poll_cb" title="uv_poll_cb">uv_poll_cb</a><em>&nbsp;cb</em><span class="sig-paren">)</span><a class="headerlink" href="#c.uv_poll_start" title="Permalink to this definition">¶</a></dt>
<dd><p>Starts polling the file descriptor. <cite>events</cite> is a bitmask consisting made up
of UV_READABLE and UV_WRITABLE. As soon as an event is detected the callback
will be called with <cite>status</cite> set to 0, and the detected events set on the
<cite>events</cite> field.</p>
<p>If an error happens while polling, <cite>status</cite> will be &lt; 0 and corresponds
with one of the UV_E* error codes (see <a class="reference internal" href="errors.html#errors"><em>Error handling</em></a>). The user should
not close the socket while the handle is active. If the user does that
anyway, the callback <em>may</em> be called reporting an error status, but this
is <strong>not</strong> guaranteed.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Calling <a class="reference internal" href="#c.uv_poll_start" title="uv_poll_start"><code class="xref c c-func docutils literal"><span class="pre">uv_poll_start()</span></code></a> on a handle that is already active is fine. Doing so
will update the events mask that is being watched for.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="c.uv_poll_stop">
int <code class="descname">uv_poll_stop</code><span class="sig-paren">(</span><a class="reference internal" href="#c.uv_poll_t" title="uv_poll_t">uv_poll_t</a>*<em>&nbsp;poll</em><span class="sig-paren">)</span><a class="headerlink" href="#c.uv_poll_stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop polling the file descriptor, the callback will no longer be called.</p>
</dd></dl>

<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">The <a class="reference internal" href="handle.html#c.uv_handle_t" title="uv_handle_t"><code class="xref c c-type docutils literal"><span class="pre">uv_handle_t</span></code></a> API functions also apply.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#"><code class="docutils literal"><span class="pre">uv_poll_t</span></code> &#8212; Poll handle</a><ul>
<li><a class="reference internal" href="#data-types">Data types</a><ul>
<li><a class="reference internal" href="#public-members">Public members</a></li>
</ul>
</li>
<li><a class="reference internal" href="#api">API</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="async.html"
                        title="previous chapter"><code class="docutils literal"><span class="pre">uv_async_t</span></code> &#8212; Async handle</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="signal.html"
                        title="next chapter"><code class="docutils literal"><span class="pre">uv_signal_t</span></code> &#8212; Signal handle</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/poll.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="signal.html" title="uv_signal_t — Signal handle"
             >next</a> |</li>
        <li class="right" >
          <a href="async.html" title="uv_async_t — Async handle"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">libuv 1.4.2 API documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright libuv contributors.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3b3.
    </div>
  </body>
</html>